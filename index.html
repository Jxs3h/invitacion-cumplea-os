<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invitaci√≥n Especial de Cumplea√±os</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Aqu√≠ va tu CSS existente */
    </style>
</head>
<body>
    <!-- Pantalla de Inicio -->
    <div id="splash-screen">
        <h1>¬°Tienes una Invitaci√≥n Especial!</h1>
        <p>Haz clic para descubrirla</p>
        <button id="splash-button">Ver Invitaci√≥n</button>
    </div>

    <!-- Contenedor de la Invitaci√≥n -->
    <div class="invitation-container floating">
        <div class="header">
            <h1 class="title">¬°Est√°s Cordialmente Invitado!</h1>
        </div>

        <div class="invitation-message">
            <p class="text-lg mb-8">¬°Hola, te esperamos en esta celebraci√≥n muy especial!</p>

            <div class="invitation-text">
                "¬°Qu√© tal!<br>
                <br>
                Tengo el agrado de invitarte a la celebraci√≥n de mi cumplea√±os,<br>
                el d√≠a s√°bado 26 de Julio 2025 a las 20:00.<br>
                <br>
                ¬°Espero que puedas asistir! <span style="font-size: 1.8em; display: inline-block; animation: bounce 0.5s infinite alternate; color: initial;">ü•≥ü•≥ü•≥</span>"
            </div>

            <div class="dates-container">
                <div class="date-card">
                    <div class="date-type">D√≠a Real</div>
                    <div class="date-value">Jueves 24</div>
                </div>

                <div class="date-card">
                    <div class="date-type">Celebraci√≥n</div>
                    <div class="date-value">S√°bado 26</div>
                </div>
            </div>

            <div class="form-container">
                <input type="text" id="nombre" class="form-input" placeholder="Tu nombre" required>
                <br>
                <button onclick="confirmarAsistencia()" class="form-button">Confirmar Asistencia</button>
                <p id="mensaje-confirmacion" style="display:none; color:#2b6cb0; margin-top:10px;"></p>
            </div>
        </div>

        <div class="footer">
            <p class="text-white text-lg">No faltes, ¬°ser√° incre√≠ble!</p>
        </div>
    </div>

    <!-- Elemento de Audio -->
    <audio id="invitationAudio" src="invitacion.mp3" preload="auto" autoplay muted></audio>

    <!-- Elemento de Audio -->
    <audio id="invitationAudio" src="invitacion.mp3" preload="auto"></audio>

    <!-- EmailJS CDN -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <script type="text/javascript">
       (function(){
          emailjs.init("TU_PUBLIC_KEY_DE_EMAILJS"); // Reemplaza con tu Public Key
       })();
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const splashScreen = document.getElementById('splash-screen');
            const splashButton = document.getElementById('splash-button');
            const invitationContainer = document.querySelector('.invitation-container');
            const invitationAudio = document.getElementById('invitationAudio');

            document.body.style.overflow = 'hidden'; // Oculta el scroll del body mientras la splash est√° activa

            splashButton.addEventListener('click', function() {
                // Oculta la pantalla de inicio
                splashScreen.classList.add('hidden');
                
                // Intenta reproducir el audio cuando se muestre la invitaci√≥n
                setTimeout(() => {
                    document.getElementById('invitationAudio').play().catch(e => {
                        console.log("Audio blocked, needs user interaction:", e);
                        const playButton = document.createElement('button');
                        playButton.textContent = '‚ñ∂ Reproducir mensaje';
                        playButton.className = 'bg-blue-500 text-white px-4 py-2 rounded-lg mt-4';
                        playButton.onclick = () => document.getElementById('invitationAudio').play();
                        document.querySelector('.invitation-message').append(playButton);
                    });
                }, 500);

                // Muestra la invitaci√≥n despu√©s de un breve retraso para la transici√≥n
                setTimeout(() => {
                    invitationContainer.classList.add('visible');
                    document.body.style.overflow = 'auto'; // Habilita el scroll del body

                    // Intenta reproducir el audio
                    setTimeout(() => {
                        invitationAudio.muted = false; // Quitamos el mute despu√©s de iniciar
                        invitationAudio.play().catch(error => {
                            console.log("La reproducci√≥n autom√°tica de audio fue bloqueada:", error);
                            // Mostrar instrucci√≥n clara para el usuario
                            const audioButton = document.createElement('button');
                            audioButton.textContent = 'üîä Hacer clic para reproducir audio';
                            audioButton.style.margin = '10px 0';
                            audioButton.style.padding = '8px 15px';
                            audioButton.style.borderRadius = '10px';
                            audioButton.style.backgroundColor = '#2b6cb0';
                            audioButton.style.color = 'white';
                            audioButton.style.border = 'none';
                            audioButton.onclick = () => {
                                invitationAudio.play();
                                audioButton.remove();
                            };
                            document.querySelector('.invitation-message').appendChild(audioButton);
                        });
                    }, 300);

                }, 500); // Coincide con la duraci√≥n de la transici√≥n de opacidad
            });
        });

        function confirmarAsistencia() {
            const nombre = document.getElementById('nombre').value;
            const mensajeConfirmacion = document.getElementById('mensaje-confirmacion');

            if (!nombre) {
                alert('Por favor ingresa tu nombre');
                return;
            }

            // Deshabilitar el bot√≥n para evitar m√∫ltiples env√≠os
            const confirmButton = document.querySelector('.form-button');
            confirmButton.disabled = true;
            confirmButton.textContent = 'Enviando...';

            // Par√°metros para EmailJS
            const templateParams = {
                from_name: nombre,
                to_email: 'tu_correo@ejemplo.com', // Reemplaza con tu correo
                message: `Confirmaci√≥n: ${nombre} asistir√° a la celebraci√≥n del cumplea√±os el 26 de Julio`,
            };

            // Env√≠a el correo usando EmailJS
            emailjs.send('YOUR_SERVICE_ID', 'YOUR_TEMPLATE_ID', templateParams)
                .then(function(response) {
                    console.log('Correo enviado con √©xito!', response.status, response.text);
                    mensajeConfirmacion.textContent = `¬°Gracias ${nombre}! Tu asistencia ha sido confirmada.`;
                    mensajeConfirmacion.style.display = 'block';
                    mensajeConfirmacion.style.color = '#2b6cb0';
                    confirmButton.textContent = 'Asistencia Confirmada';
                    // Play confirmation sound if needed
                    try {
                        new Audio('confirmacion.mp3').play();
                    } catch(e) { console.log('Could not play confirmation sound', e); }
                }, function(error) {
                    console.error('Error al enviar el correo:', error);
                    mensajeConfirmacion.textContent = `Lo siento, hubo un error al confirmar tu asistencia. Intenta de nuevo.`;
                    mensajeConfirmacion.style.display = 'block';
                    mensajeConfirmacion.style.color = 'red';
                    confirmButton.textContent = 'Confirmar Asistencia';
                    confirmButton.disabled = false;
                });
        }
    </script>
</body>
</html>
